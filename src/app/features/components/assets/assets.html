<div class="assets-container w-full h-full px-8 mt-28">
    <span class="text-sm text-left font-semibold text-gray-500">Tableau de bord > {{ title() }}</span>
    <div class="header w-full flex items-center justify-between">
        <h1 class="text-5xl text-gray-700 font-bold my-4">Gestion des titres (actifs)</h1>
        <!-- <button class="text-white bg-indigo-900 py-2 px-6 rounded-full shadow-md cursor-pointer">+ Titre</button> -->
        <p-button icon="pi pi-plus" label="Ajouter Titre" size="small" severity="contrast" [rounded]="true" />
    </div>

    <div class="table-container flex items-start justify-between gap-4">
        <table class="w-3/4">
            <thead class="+w-full">
                <tr class="w-full bg-gray-200">
                    <td class="text-sm font-bold text-gray-600 p-2">Id</td>
                    <td class="text-sm font-bold text-gray-600 p-2">Symbol</td>
                    <td class="text-sm font-bold text-gray-600 p-2">Nom</td>
                    <td class="text-sm font-bold text-gray-600 p-2">Image</td>
                    <td class="text-sm font-bold text-gray-600 p-2">Prix Actuel $</td>
                    <td class="text-sm font-bold text-gray-600 p-2">Ch. Prix %</td>
                    <td class="text-sm font-bold text-gray-600 p-2">Qt. en circulation</td>
                    <td class="text-sm font-bold text-gray-600 p-2">Qt. total</td>
                    <td class="text-sm font-bold text-gray-600 p-2">Mr. Rang</td>
                    <td class="text-sm font-bold text-gray-600 p-2">Options</td>
                </tr>
            </thead>
            <tbody>
                <ng-container *ngIf="transactionData().length > 0; else noData">
                    @for (item of transactionData(); track item.id) {
                        <tr>
                            <td class="border-b p-2">{{ item.id }}</td>
                            <td class="border-b p-2">{{ item.symbol }}</td>
                            <td class="border-b p-2">{{ item.name }}</td>
                            <td class="border-b p-2">
                                <picture>
                                    <img class="w-8 h-8" [src]="item.image" alt="{{ item.name }}" />
                                </picture>
                            </td>
                            <td class="border-b p-2">{{ item.current_price }}</td>
                            <td class="border-b p-2">{{ item.price_change_percentage_24h }}</td>
                            <td class="border-b p-2">{{ item.circulating_supply }}</td>
                            <td class="border-b p-2">{{ item.total_supply }}</td>
                            <td class="border-b p-2">{{ item.market_cap_rank }}</td>
                            <td class="border-b p-2 cursor-pointer">
                                <div class="flex items-center justify-center gap-2">
                                    <p-toast position="top-right" />
                                    <p-confirmdialog [style]="{ width: '30rem' }">
                                        <ng-template #message let-message>
                                            <i [ngClass]="message.icon" class="text-sm"></i>
                                            <span class="text-sm">{{ message.message }}</span>
                                        </ng-template>
                                    </p-confirmdialog>
                                    <p-menu #menu [model]="items()" popup="true" />
                                    <p-button icon="pi pi-ellipsis-v" size="small" variant="text" severity="contrast" (click)="menu.toggle($event)" />
                                </div>
                            </td>
                        </tr>
                    }
                </ng-container>

                <ng-template #noData>
                    <tr>
                        <td class="border-b p-2 text-center" colspan="9">Aucune donnée disponible</td>
                    </tr>
                </ng-template>
            </tbody>
        </table>

        <div class="analytics w-1/4">
            <div class="higher w-full p-2 mb-4 border shadow-md rounded-lg">
                <app-crypto-card [cryptoItem]="transactionData()[0]" />
            </div>
            <div class="lower w-full border rounded-lg">
                <app-crypto-card [cryptoItem]="transactionData()[9]" />
            </div>
        </div>
    </div>

    <div class="circulation-graph w-full p-2 my-20">
        <h1 class="text-4xl text-gray-700 font-bold my-4">Gestion des titres (actifs)</h1>
        <span class="text-sm text-left font-semibold text-gray-500">
            Graphique expliquant l'évolution des {{ title() }} en fonction des quantités en circulation, des quantités totales et des prix sur le marché.
        </span>

        <div class="graph-stats w-full flex items-start justify-between gap-20 mt-4">
            <div class="graph w-3/4 border">
                <app-chart-line [chartData]="transactionData()" />
            </div>
            <div class="stats w-1/4 border"></div>
        </div>
    </div>
</div>
